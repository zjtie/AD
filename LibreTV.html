<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LibreTV è§†é¢‘å¯¼èˆª</title>
<style>
body { font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif; background:#f5f5f5; margin:0; padding:0; }
header { background:#4CAF50; color:white; text-align:center; padding:1rem; font-size:1.8rem; font-weight:bold; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
main { max-width:1200px; margin:2rem auto; padding:0 1rem; }
h2 { margin-top:2rem; color:#333; border-left:6px solid #4CAF50; padding-left:0.5rem; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:1rem; margin-top:1rem; }
.card { background:white; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); padding:1rem; text-align:center; transition: transform 0.2s, box-shadow 0.2s; }
.card:hover { transform:translateY(-5px); box-shadow:0 8px 16px rgba(0,0,0,0.2); }
.card a { text-decoration:none; color:#333; font-weight:bold; display:block; margin-top:0.5rem; word-break:break-word; }

/* ç™»å½• */
#loginOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:9999; }
#loginBox { background:white; padding:2rem; border-radius:12px; text-align:center; width:300px; box-shadow:0 4px 10px rgba(0,0,0,0.3);}
#loginBox input[type="password"] { width:100%; padding:0.5rem; margin-top:1rem; font-size:1rem; }
#loginBox button { margin-top:1rem; padding:0.5rem 1rem; font-size:1rem; background:#4CAF50; color:white; border:none; border-radius:6px; cursor:pointer; }
#loginBox button:hover { background:#45a049; }

/* ç®¡ç†æŒ‰é’® */
#adminBtn {
  position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px;
  background:#4CAF50; color:white; border-radius:50%; text-align:center; line-height:50px;
  cursor:pointer; opacity:0.3; transition: opacity 0.3s;
}
#adminBtn:hover { opacity:1; }

/* ç®¡ç†é¢æ¿ */
#adminPanel {
  position: fixed; bottom: 80px; right: 20px; width: 300px; max-height: 400px;
  background:white; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2);
  padding:1rem; overflow-y:auto; display:none; z-index:10000;
}
#adminPanel input { width:100%; padding:0.4rem; margin:0.2rem 0; box-sizing:border-box; }
#adminPanel button { margin:0.2rem 0; padding:0.4rem 0.8rem; background:#4CAF50; color:white; border:none; border-radius:6px; cursor:pointer; }
#adminPanel button:hover { background:#45a049; }
.siteItem { display:flex; justify-content:space-between; align-items:center; margin:0.2rem 0; padding:0.2rem 0; border-bottom:1px solid #ddd; }
.siteItem span { word-break:break-word; flex:1; }
.siteItem button { margin-left:5px; }
</style>
</head>
<body>
<div id="loginOverlay">
  <div id="loginBox">
    <h3>è¯·è¾“å…¥è®¿é—®å¯†ç </h3>
    <input type="password" id="passwordInput" placeholder="å¯†ç ">
    <button onclick="checkPassword()">è¿›å…¥</button>
  </div>
</div>

<header>LibreTV è§†é¢‘å¯¼èˆª</header>
<main id="mainContent" style="display:none;">
  <h2>ğŸš« éæˆäººèµ„æº</h2>
  <div class="grid" id="nonAdult"></div>

  <h2>ğŸ” æˆäººèµ„æº</h2>
  <div class="grid" id="adult"></div>
</main>

<!-- ç®¡ç†æŒ‰é’® -->
<div id="adminBtn">âš™ï¸</div>

<!-- ç®¡ç†é¢æ¿ -->
<div id="adminPanel">
  <h3>ç½‘å€ç®¡ç†</h3>
  <input type="text" id="siteName" placeholder="åç§°">
  <input type="url" id="siteURL" placeholder="ç½‘å€">
  <button onclick="addSite()">æ–°å¢</button>
  <div id="siteList"></div>
  <hr>
  <h4>æ•°æ®å¤‡ä»½ä¸æ¢å¤</h4>
  <button onclick="exportJSON()">å¯¼å‡º JSON</button>
  <input type="file" id="importFile" accept=".json" onchange="importJSON(event)">
</div>

<script>
const PASSWORD = "123456"; // å¯ä¿®æ”¹
// é»˜è®¤ç½‘å€åˆ—è¡¨
const defaultResources = [
  { type:"nonAdult", sites:[
      { name:"é‡‘é¹°èµ„æº", url:"https://jyzyapi.com/" },
      { name:"éå‡¡èµ„æº", url:"http://ffzy5.tv/" },
      { name:"æ¨±èŠ±èµ„æº", url:"https://yhzy.cc/" },
      { name:"æš´é£èµ„æº", url:"https://bfzyapi.com/" },
      { name:"ç”µå½±å¤©å ‚", url:"https://caiji.dyttzyapi.com/" },
      { name:"å¦‚æ„èµ„æº", url:"https://cj.rycjapi.com/" },
      { name:"360èµ„æº", url:"https://360zy.com/" },
      { name:"æé€Ÿèµ„æº", url:"https://jszyapi.com/" },
      { name:"é­”çˆªèµ„æº", url:"https://mozhuazy.com/" },
      { name:"æœ€å¤§èµ„æº", url:"https://api.zuidapi.com/" },
      { name:"æ— å°½èµ„æº", url:"https://api.wujinapi.me/" },
      { name:"iKunèµ„æº", url:"https://ikunzyapi.com/" },
      { name:"CKèµ„æº", url:"https://ckzy.me/" },
      { name:"èŒ…å°èµ„æº", url:"https://caiji.maotaizy.cc/" },
      { name:"çŒ«çœ¼èµ„æº", url:"https://api.maoyanapi.top/" }
  ]},
  { type:"adult", sites:[
      { name:"æ£®æ—èµ„æº", url:"https://slapibf.com/" },
      { name:"éº»è±†èµ„æº", url:"https://www.bt4.cc/" },
      { name:"91èµ„æº", url:"https://91md.me/" },
      { name:"è¾£æ¤’èµ„æº", url:"https://apilj.com/" },
      { name:"souavèµ„æº", url:"https://api.souavzy.vip/" },
      { name:"jkunèµ„æº", url:"https://jkunzyapi.com/" },
      { name:"ç™¾ä¸‡èµ„æº", url:"https://api.bwzyz.com/" },
      { name:"155èµ„æº", url:"https://155api.com/" },
      { name:"lsbèµ„æº", url:"https://apilsbzy1.com/" },
      { name:"é»„è‰²ä»“åº“", url:"https://hsckzy.vip/" },
      { name:"ç‰å…”èµ„æºæˆäººç‰ˆ", url:"https://yutuzy10.com/" },
      { name:"å¿«æ’­èµ„æº", url:"https://gayapi.com/" },
      { name:"æå§èµ„æº", url:"https://xingba222.com/" },
      { name:"91jpzyw", url:"https://91jpzyw.com/" },
      { name:"å¤§å¥¶èµ„æº", url:"https://apidanaizi.com/" },
      { name:"ç»†èƒèµ„æº", url:"https://www.xxibaozyw.com/" },
      { name:"é²¨é±¼èµ„æº", url:"https://shayuzy.com/" },
      { name:"å°é¸¡èµ„æº", url:"https://api.xiaojizy.live/" },
      { name:"æœ¨ç“œAC", url:"https://www.fczy907.com/" }
  ]}
];

// åˆå§‹åŒ–
let resources = JSON.parse(localStorage.getItem("libretvResources") || "null") || defaultResources;

// å¯†ç éªŒè¯
if(localStorage.getItem("libretvPwd") === PASSWORD){
  showMainContent();
}
function checkPassword(){
  const input = document.getElementById("passwordInput").value;
  if(input===PASSWORD){
    localStorage.setItem("libretvPwd", PASSWORD);
    showMainContent();
  } else { alert("å¯†ç é”™è¯¯"); }
}
function showMainContent(){
  document.getElementById("loginOverlay").style.display = "none";
  document.getElementById("mainContent").style.display = "block";
  renderAllSites();
}

// æ¸²æŸ“ç½‘ç«™
function renderSites(containerId, sites){
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  sites.forEach((site,i)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `<a href="${site.url}" target="_blank">${site.name}</a>`;
    container.appendChild(card);
  });
}

// æ¸²æŸ“å…¨éƒ¨
function renderAllSites(){
  resources.forEach(group=>{
    if(group.type==="nonAdult") renderSites("nonAdult", group.sites);
    else renderSites("adult", group.sites);
  });
  renderAdminList();
}

// ç®¡ç†æŒ‰é’®
const adminBtn = document.getElementById("adminBtn");
const adminPanel = document.getElementById("adminPanel");
adminBtn.onclick = ()=>{ adminPanel.style.display = adminPanel.style.display==='block'?'none':'block'; }

// ç®¡ç†é¢æ¿åŠŸèƒ½
function renderAdminList(){
  const list = document.getElementById("siteList");
  list.innerHTML="";
  resources.forEach(group=>{
    group.sites.forEach((site,i)=>{
      const div = document.createElement("div");
      div.className="siteItem";
      div.innerHTML = `<span>[${group.type}] ${site.name} - ${site.url}</span>
      <button onclick="editSite('${group.type}',${i})">ç¼–è¾‘</button>
      <button onclick="deleteSite('${group.type}',${i})">åˆ é™¤</button>`;
      list.appendChild(div);
    });
  });
}

function addSite(){
  const name = document.getElementById("siteName").value.trim();
  const url = document.getElementById("siteURL").value.trim();
  if(!name || !url){ alert("è¯·å¡«å†™å®Œæ•´"); return; }
  const type = prompt("è¯·è¾“å…¥ç±»å‹: nonAdult æˆ– adult","nonAdult");
  if(type!=="nonAdult" && type!=="adult"){ alert("ç±»å‹é”™è¯¯"); return; }
  const group = resources.find(g=>g.type===type);
  group.sites.push({name,url});
  localStorage.setItem("libretvResources", JSON.stringify(resources));
  renderAllSites();
}

function deleteSite(type, idx){
  const group = resources.find(g=>g.type===type);
  if(confirm("ç¡®å®šåˆ é™¤å—ï¼Ÿ")){
    group.sites.splice(idx,1);
    localStorage.setItem("libretvResources", JSON.stringify(resources));
    renderAllSites();
  }
}

function editSite(type, idx){
  const group = resources.find(g=>g.type===type);
  const site = group.sites[idx];
  const newName = prompt("ä¿®æ”¹åç§°", site.name);
  const newURL = prompt("ä¿®æ”¹ç½‘å€", site.url);
  if(newName && newURL){
    site.name = newName; site.url = newURL;
    localStorage.setItem("libretvResources", JSON.stringify(resources));
    renderAllSites();
  }
  // å¯¼å‡º JSON
function exportJSON(){
  const dataStr = JSON.stringify(resources, null, 2);
  const blob = new Blob([dataStr], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "libretv_sites.json";
  a.click();
  URL.revokeObjectURL(url);
}

// å¯¼å…¥ JSON
function importJSON(event){
  const file = event.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(e){
    try {
      const importedData = JSON.parse(e.target.result);
      if(!Array.isArray(importedData)){
        alert("æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼");
        return;
      }
      resources = importedData;
      localStorage.setItem("libretvResources", JSON.stringify(resources));
      renderAllSites();
      alert("å¯¼å…¥æˆåŠŸï¼");
    } catch(err){
      alert("JSONè§£æå¤±è´¥ï¼š" + err);
    }
  };
  reader.readAsText(file);
}

}
</script>
</body>
</html>
